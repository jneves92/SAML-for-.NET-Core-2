2023-04-17 23:35:48.735 +01:00 [INF] ComponentSpace.Saml2, Version=4.7.0.0, Culture=neutral, PublicKeyToken=16647a1283418145, .NET 6.0 build, Evaluation.
2023-04-17 23:35:48.738 +01:00 [INF] CLR: .NET 7.0.1, OS: Darwin 22.4.0 Darwin Kernel Version 22.4.0: Mon Mar  6 20:59:28 PST 2023; root:xnu-8796.101.5~3/RELEASE_ARM64_T6000, Culture: English (Portugal)
2023-04-17 23:35:48.739 +01:00 [DBG] Configuration resolver: ComponentSpace.Saml2.Configuration.Resolver.SamlConfigurationResolver
2023-04-17 23:35:48.740 +01:00 [DBG] Certificate manager: ComponentSpace.Saml2.Certificates.CertificateManager
2023-04-17 23:35:48.740 +01:00 [DBG] Certificate loader: ComponentSpace.Saml2.Certificates.CachedCertificateLoader
2023-04-17 23:35:48.741 +01:00 [DBG] ID cache: ComponentSpace.Saml2.Cache.DistributedIDCache
2023-04-17 23:35:48.742 +01:00 [DBG] Artifact cache: ComponentSpace.Saml2.Cache.DistributedArtifactCache
2023-04-17 23:35:48.742 +01:00 [DBG] SSO session store: ComponentSpace.Saml2.Session.DistributedSsoSessionStore
2023-04-17 23:35:48.828 +01:00 [DBG] SAML configuration:
{
  "SAML": {
    "$schema": "https://www.componentspace.com/schemas/saml-config-schema-v1.0.json",
    "Configurations": [
      {
        "LocalServiceProviderConfiguration": {
          "ArtifactResolutionServiceUrl": "https://localhost:44360/SAML/ArtifactResolutionService",
          "AssertionConsumerServiceUrl": "https://localhost:44360/SAML/AssertionConsumerService",
          "Description": "Example Service Provider",
          "LocalCertificates": [
            {
              "FileName": "certificates/sp.pfx",
              "Password": "********"
            }
          ],
          "Name": "https://ExampleServiceProvider",
          "SingleLogoutServiceUrl": "https://localhost:44360/SAML/SingleLogoutService"
        },
        "PartnerIdentityProviderConfigurations": [
          {
            "ArtifactResolutionServiceUrl": "https://localhost:44313/SAML/ArtifactResolutionService",
            "Description": "Example Identity Provider",
            "Name": "https://ExampleIdentityProvider",
            "PartnerCertificates": [
              {
                "FileName": "certificates/idp.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:44313/SAML/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:44313/SAML/SingleSignOnService"
          },
          {
            "ArtifactResolutionServiceUrl": "https://localhost:44377/SAML/ArtifactResolutionService",
            "Description": "Middleware Identity Provider",
            "Name": "https://MiddlewareIdentityProvider",
            "PartnerCertificates": [
              {
                "FileName": "certificates/idp.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:44377/SAML/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:44377/SAML/SingleSignOnService"
          },
          {
            "ArtifactResolutionServiceUrl": "https://localhost:44361/SAML/IDP/ArtifactResolutionService",
            "Description": "SAML Proxy",
            "Name": "https://SamlProxy",
            "PartnerCertificates": [
              {
                "FileName": "certificates/proxy.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:44361/SAML/IDP/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:44361/SAML/IDP/SingleSignOnService"
          },
          {
            "Description": "Identity Server 4",
            "Name": "https://IdentityServer",
            "PartnerCertificates": [
              {
                "FileName": "certificates/identityserver4.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:5001/SAML/IDP/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:5001/SAML/IDP/SingleSignOnService"
          },
          {
            "ArtifactResolutionServiceUrl": "https://adfs.componentspace.com/adfs/services/trust/artifactresolution",
            "Description": "ADFS",
            "Name": "http://adfs.componentspace.com/adfs/services/trust",
            "PartnerCertificates": [
              {
                "FileName": "certificates/adfs.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://adfs.componentspace.com/adfs/ls/",
            "SingleSignOnServiceUrl": "https://adfs.componentspace.com/adfs/ls/"
          },
          {
            "Description": "Azure AD",
            "Name": "https://sts.windows.net/f2f933ec-d7c9-433f-8926-d3a0732a7dcf/",
            "PartnerCertificates": [
              {
                "FileName": "certificates/azure.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://login.microsoftonline.com/f2f933ec-d7c9-433f-8926-d3a0732a7dcf/saml2",
            "SingleSignOnServiceUrl": "https://login.microsoftonline.com/f2f933ec-d7c9-433f-8926-d3a0732a7dcf/saml2"
          },
          {
            "Description": "Google",
            "Name": "https://accounts.google.com/o/saml2?idpid=C01zlugi1",
            "PartnerCertificates": [
              {
                "FileName": "certificates/google.cer"
              }
            ],
            "SingleSignOnServiceUrl": "https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1"
          },
          {
            "Description": "Salesforce",
            "Name": "https://componentspace-dev-ed.my.salesforce.com",
            "PartnerCertificates": [
              {
                "FileName": "certificates/salesforce.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://componentspace-dev-ed.my.salesforce.com/services/auth/idp/saml2/logout",
            "SingleSignOnServiceUrl": "https://componentspace-dev-ed.my.salesforce.com/idp/endpoint/HttpRedirect"
          },
          {
            "Description": "Okta",
            "Name": "http://www.okta.com/exky5euw54Xm4gyj30h7",
            "PartnerCertificates": [
              {
                "FileName": "certificates/okta.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://componentspace.oktapreview.com/app/componentspace_exampleserviceprovider_1/exky5euw54Xm4gyj30h7/slo/saml",
            "SingleSignOnServiceUrl": "https://componentspace.oktapreview.com/app/componentspace_exampleserviceprovider_1/exky5euw54Xm4gyj30h7/sso/saml"
          },
          {
            "Description": "OneLogin",
            "Name": "https://app.onelogin.com/saml/metadata/715551",
            "PartnerCertificates": [
              {
                "FileName": "certificates/onelogin.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://componentspacetest-dev.onelogin.com/trust/saml2/http-redirect/slo/715551",
            "SingleSignOnServiceUrl": "https://componentspacetest-dev.onelogin.com/trust/saml2/http-post/sso/715551"
          },
          {
            "Description": "PingOne",
            "Name": "https://pingone.com/idp/componentspace",
            "PartnerCertificates": [
              {
                "FileName": "certificates/pingone.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://sso.connect.pingidentity.com/sso/SLO.saml2",
            "SingleSignOnServiceUrl": "https://sso.connect.pingidentity.com/sso/idp/SSO.saml2?idpid=7f3aaa28-259c-4b1b-805d-cd268089403c"
          },
          {
            "Description": "Centrify",
            "Name": "https://aau0294.my.centrify.com/21321d36-0d21-4d21-8bd1-151c08e7848d",
            "PartnerCertificates": [
              {
                "FileName": "certificates/centrify.cer"
              }
            ],
            "SingleSignOnServiceUrl": "https://aau0294.my.centrify.com/applogin/appKey/21321d36-0d21-4d21-8bd1-151c08e7848d/customerId/AAU0294"
          },
          {
            "Description": "Shibboleth",
            "MappingRules": [
              {
                "Rule": "Rename",
                "Value": "mail"
              }
            ],
            "Name": "https://samltest.id/saml/idp",
            "PartnerCertificates": [
              {
                "FileName": "certificates/shibboleth1.cer"
              },
              {
                "FileName": "certificates/shibboleth2.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://samltest.id/idp/profile/SAML2/Redirect/SLO",
            "SingleSignOnServiceUrl": "https://samltest.id/idp/profile/SAML2/Redirect/SSO"
          }
        ]
      }
    ]
  }
}
2023-04-17 23:35:48.829 +01:00 [DBG] The SAML SSO environment has been successfully initialized.
2023-04-17 23:35:48.834 +01:00 [DBG] Initiating SSO to the partner identity provider https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1.
2023-04-17 23:35:48.837 +01:00 [DBG] The SSO session ID 05382eb7-0ed4-4944-a401-35dd09601fac has been retrieved from the saml-session cookie.
2023-04-17 23:35:48.837 +01:00 [DBG] SSO session state is being initialized.
2023-04-17 23:35:48.838 +01:00 [DBG] SSO session state for saml-session-05382eb7-0ed4-4944-a401-35dd09601fac-SamlState is being saved to the distributed cache.
2023-04-17 23:35:48.841 +01:00 [DBG] SAML session state (05382eb7-0ed4-4944-a401-35dd09601fac):
SP state:

2023-04-17 23:35:48.843 +01:00 [ERR] Initiation of SSO to the partner identity provider https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1 has failed.
ComponentSpace.Saml2.Exceptions.SamlConfigurationException: The partner identity provider https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1 is not configured.
   at ComponentSpace.Saml2.Configuration.Resolver.SamlConfigurationResolver.GetPartnerIdentityProviderConfigurationAsync(String configurationName, String partnerName)
   at ComponentSpace.Saml2.SamlServiceProvider.GetPartnerIdpConfigurationAsync(String partnerName)
   at ComponentSpace.Saml2.SamlServiceProvider.InitiateSsoAsync(String partnerName, String relayState, ISsoOptions ssoOptions)
2023-04-17 23:35:48.903 +01:00 [ERR] An unhandled exception has occurred while executing the request.
ComponentSpace.Saml2.Exceptions.SamlConfigurationException: The partner identity provider https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1 is not configured.
   at ComponentSpace.Saml2.Configuration.Resolver.SamlConfigurationResolver.GetPartnerIdentityProviderConfigurationAsync(String configurationName, String partnerName)
   at ComponentSpace.Saml2.SamlServiceProvider.GetPartnerIdpConfigurationAsync(String partnerName)
   at ComponentSpace.Saml2.SamlServiceProvider.InitiateSsoAsync(String partnerName, String relayState, ISsoOptions ssoOptions)
   at ExampleServiceProvider.Controllers.SamlController.InitiateSingleSignOn(String returnUrl) in /Users/jorgeneves/Downloads/SAML for .NET Core 2/Examples/NET-6.0/SSO/ExampleServiceProvider/Controllers/SamlController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-04-17 23:37:11.591 +01:00 [INF] ComponentSpace.Saml2, Version=4.7.0.0, Culture=neutral, PublicKeyToken=16647a1283418145, .NET 6.0 build, Evaluation.
2023-04-17 23:37:11.595 +01:00 [INF] CLR: .NET 7.0.1, OS: Darwin 22.4.0 Darwin Kernel Version 22.4.0: Mon Mar  6 20:59:28 PST 2023; root:xnu-8796.101.5~3/RELEASE_ARM64_T6000, Culture: English (Portugal)
2023-04-17 23:37:11.595 +01:00 [DBG] Configuration resolver: ComponentSpace.Saml2.Configuration.Resolver.SamlConfigurationResolver
2023-04-17 23:37:11.596 +01:00 [DBG] Certificate manager: ComponentSpace.Saml2.Certificates.CertificateManager
2023-04-17 23:37:11.597 +01:00 [DBG] Certificate loader: ComponentSpace.Saml2.Certificates.CachedCertificateLoader
2023-04-17 23:37:11.597 +01:00 [DBG] ID cache: ComponentSpace.Saml2.Cache.DistributedIDCache
2023-04-17 23:37:11.598 +01:00 [DBG] Artifact cache: ComponentSpace.Saml2.Cache.DistributedArtifactCache
2023-04-17 23:37:11.598 +01:00 [DBG] SSO session store: ComponentSpace.Saml2.Session.DistributedSsoSessionStore
2023-04-17 23:37:11.679 +01:00 [DBG] SAML configuration:
{
  "SAML": {
    "$schema": "https://www.componentspace.com/schemas/saml-config-schema-v1.0.json",
    "Configurations": [
      {
        "LocalServiceProviderConfiguration": {
          "ArtifactResolutionServiceUrl": "https://localhost:44360/SAML/ArtifactResolutionService",
          "AssertionConsumerServiceUrl": "https://localhost:44360/SAML/AssertionConsumerService",
          "Description": "Example Service Provider",
          "LocalCertificates": [
            {
              "FileName": "certificates/sp.pfx",
              "Password": "********"
            }
          ],
          "Name": "https://ExampleServiceProvider",
          "SingleLogoutServiceUrl": "https://localhost:44360/SAML/SingleLogoutService"
        },
        "PartnerIdentityProviderConfigurations": [
          {
            "ArtifactResolutionServiceUrl": "https://localhost:44313/SAML/ArtifactResolutionService",
            "Description": "Example Identity Provider",
            "Name": "https://ExampleIdentityProvider",
            "PartnerCertificates": [
              {
                "FileName": "certificates/idp.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:44313/SAML/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:44313/SAML/SingleSignOnService"
          },
          {
            "ArtifactResolutionServiceUrl": "https://localhost:44377/SAML/ArtifactResolutionService",
            "Description": "Middleware Identity Provider",
            "Name": "https://MiddlewareIdentityProvider",
            "PartnerCertificates": [
              {
                "FileName": "certificates/idp.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:44377/SAML/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:44377/SAML/SingleSignOnService"
          },
          {
            "ArtifactResolutionServiceUrl": "https://localhost:44361/SAML/IDP/ArtifactResolutionService",
            "Description": "SAML Proxy",
            "Name": "https://SamlProxy",
            "PartnerCertificates": [
              {
                "FileName": "certificates/proxy.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:44361/SAML/IDP/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:44361/SAML/IDP/SingleSignOnService"
          },
          {
            "Description": "Identity Server 4",
            "Name": "https://IdentityServer",
            "PartnerCertificates": [
              {
                "FileName": "certificates/identityserver4.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://localhost:5001/SAML/IDP/SingleLogoutService",
            "SingleSignOnServiceUrl": "https://localhost:5001/SAML/IDP/SingleSignOnService"
          },
          {
            "ArtifactResolutionServiceUrl": "https://adfs.componentspace.com/adfs/services/trust/artifactresolution",
            "Description": "ADFS",
            "Name": "http://adfs.componentspace.com/adfs/services/trust",
            "PartnerCertificates": [
              {
                "FileName": "certificates/adfs.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://adfs.componentspace.com/adfs/ls/",
            "SingleSignOnServiceUrl": "https://adfs.componentspace.com/adfs/ls/"
          },
          {
            "Description": "Azure AD",
            "Name": "https://sts.windows.net/f2f933ec-d7c9-433f-8926-d3a0732a7dcf/",
            "PartnerCertificates": [
              {
                "FileName": "certificates/azure.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://login.microsoftonline.com/f2f933ec-d7c9-433f-8926-d3a0732a7dcf/saml2",
            "SingleSignOnServiceUrl": "https://login.microsoftonline.com/f2f933ec-d7c9-433f-8926-d3a0732a7dcf/saml2"
          },
          {
            "Description": "Google",
            "Name": "https://accounts.google.com/o/saml2?idpid=C01zlugi1",
            "PartnerCertificates": [
              {
                "FileName": "certificates/google.cer"
              }
            ],
            "SingleSignOnServiceUrl": "https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1"
          },
          {
            "Description": "Salesforce",
            "Name": "https://componentspace-dev-ed.my.salesforce.com",
            "PartnerCertificates": [
              {
                "FileName": "certificates/salesforce.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://componentspace-dev-ed.my.salesforce.com/services/auth/idp/saml2/logout",
            "SingleSignOnServiceUrl": "https://componentspace-dev-ed.my.salesforce.com/idp/endpoint/HttpRedirect"
          },
          {
            "Description": "Okta",
            "Name": "http://www.okta.com/exky5euw54Xm4gyj30h7",
            "PartnerCertificates": [
              {
                "FileName": "certificates/okta.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://componentspace.oktapreview.com/app/componentspace_exampleserviceprovider_1/exky5euw54Xm4gyj30h7/slo/saml",
            "SingleSignOnServiceUrl": "https://componentspace.oktapreview.com/app/componentspace_exampleserviceprovider_1/exky5euw54Xm4gyj30h7/sso/saml"
          },
          {
            "Description": "OneLogin",
            "Name": "https://app.onelogin.com/saml/metadata/715551",
            "PartnerCertificates": [
              {
                "FileName": "certificates/onelogin.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://componentspacetest-dev.onelogin.com/trust/saml2/http-redirect/slo/715551",
            "SingleSignOnServiceUrl": "https://componentspacetest-dev.onelogin.com/trust/saml2/http-post/sso/715551"
          },
          {
            "Description": "PingOne",
            "Name": "https://pingone.com/idp/componentspace",
            "PartnerCertificates": [
              {
                "FileName": "certificates/pingone.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://sso.connect.pingidentity.com/sso/SLO.saml2",
            "SingleSignOnServiceUrl": "https://sso.connect.pingidentity.com/sso/idp/SSO.saml2?idpid=7f3aaa28-259c-4b1b-805d-cd268089403c"
          },
          {
            "Description": "Centrify",
            "Name": "https://aau0294.my.centrify.com/21321d36-0d21-4d21-8bd1-151c08e7848d",
            "PartnerCertificates": [
              {
                "FileName": "certificates/centrify.cer"
              }
            ],
            "SingleSignOnServiceUrl": "https://aau0294.my.centrify.com/applogin/appKey/21321d36-0d21-4d21-8bd1-151c08e7848d/customerId/AAU0294"
          },
          {
            "Description": "Shibboleth",
            "MappingRules": [
              {
                "Rule": "Rename",
                "Value": "mail"
              }
            ],
            "Name": "https://samltest.id/saml/idp",
            "PartnerCertificates": [
              {
                "FileName": "certificates/shibboleth1.cer"
              },
              {
                "FileName": "certificates/shibboleth2.cer"
              }
            ],
            "SingleLogoutServiceUrl": "https://samltest.id/idp/profile/SAML2/Redirect/SLO",
            "SingleSignOnServiceUrl": "https://samltest.id/idp/profile/SAML2/Redirect/SSO"
          }
        ]
      }
    ]
  }
}
2023-04-17 23:37:11.680 +01:00 [DBG] The SAML SSO environment has been successfully initialized.
2023-04-17 23:37:11.684 +01:00 [DBG] Initiating SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1.
2023-04-17 23:37:11.686 +01:00 [DBG] The SSO session ID 05382eb7-0ed4-4944-a401-35dd09601fac has been retrieved from the saml-session cookie.
2023-04-17 23:37:11.687 +01:00 [DBG] SSO session state is being initialized.
2023-04-17 23:37:11.688 +01:00 [DBG] SSO session state for saml-session-05382eb7-0ed4-4944-a401-35dd09601fac-SamlState is being saved to the distributed cache.
2023-04-17 23:37:11.691 +01:00 [DBG] SAML session state (05382eb7-0ed4-4944-a401-35dd09601fac):
SP state:

2023-04-17 23:37:11.696 +01:00 [DBG] Constructing an authn request.
2023-04-17 23:37:11.700 +01:00 [DBG] Authn request: <samlp:AuthnRequest ID="_404c1a6b-0da5-4711-983d-b7f4db084acb" Version="2.0" IssueInstant="2023-04-17T22:37:11Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:37:11.700 +01:00 [DBG] SSO session state for saml-session-05382eb7-0ed4-4944-a401-35dd09601fac-SamlState is being saved to the distributed cache.
2023-04-17 23:37:11.704 +01:00 [DBG] Sending the SAML authn request.
2023-04-17 23:37:11.708 +01:00 [DBG] Loading the X.509 certificate from the file /Users/jorgeneves/Downloads/SAML for .NET Core 2/Examples/NET-6.0/SSO/ExampleServiceProvider/certificates/sp.pfx.
2023-04-17 23:37:11.713 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, Exportable, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(String fileName, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:37:11.724 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(String fileName, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:37:11.772 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F has been loaded.
2023-04-17 23:37:11.797 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F has been cached.
2023-04-17 23:37:11.799 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F is being validated.
2023-04-17 23:37:11.800 +01:00 [DBG] The certificate has been validated and expires on 31/12/2049 14:00:00.
2023-04-17 23:37:11.804 +01:00 [DBG] Sending a SAML message over HTTP-Redirect.
2023-04-17 23:37:11.805 +01:00 [DBG] Creating an HTTP-Redirect URL.
2023-04-17 23:37:11.805 +01:00 [DBG] SAML request: <samlp:AuthnRequest ID="_404c1a6b-0da5-4711-983d-b7f4db084acb" Version="2.0" IssueInstant="2023-04-17T22:37:11Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:37:11.806 +01:00 [DBG] Relay State: 
2023-04-17 23:37:11.809 +01:00 [DBG] Encoding SAML message: <samlp:AuthnRequest ID="_404c1a6b-0da5-4711-983d-b7f4db084acb" Version="2.0" IssueInstant="2023-04-17T22:37:11Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:37:11.810 +01:00 [DBG] Encoded SAML message: fZJfT8IwFMW/ytL30XVMwIbNIGgkQV1g+uCL6boCTbp29nb459O7DVB8kIe+3Nxzzu+edAysVBWd1G6rl+KtFuC8+SxGr1EQccIGuR8U7MKPhoT4l6N+4efDdVTkwShiPEfes7AgjY5R2AuQNweoxVyDY9o1oyDs+0Hkk2EWhrQ/pIS8IG/WJEjNXKfaOlcBxZhxbmrtoLcxZqNEj5sSG9yihVgW1VXzZBFPA/Kl6o0kyLs1losOOkZrpkC04SkDkDvxM0mtcYYbdS11IfUmRrXV1DCQQDUrBVDH6Wpyv6ANPM33S0Dvsiz108dVhrwJgLAt6dRoqEthV8LuJBdPy8UvuzKcqa0BR6OoPwhw64j/UyLvo1QaaNf6eaDqQI+ScbtNu3Ltif68nB0JUHIkvflgZaXEAaVpZycLYcf4xH6fVdGHxm8+S42S/NObKGXep1Yw13TrbN1cgZO97O/PSb4B
2023-04-17 23:37:11.812 +01:00 [DBG] Signing data: 53 41 4d 4c 52 65 71 75 65 73 74 3d 66 5a 4a 66 54 38 49 77 46 4d 57 25 32 46 79 74 4c 33 30 58 56 4d 77 49 62 4e 49 47 67 6b 51 56 31 67 25 32 42 75 43 4c 36 62 6f 43 54 62 70 32 39 6e 62 34 35 39 4f 37 44 56 42 38 6b 49 65 25 32 42 33 4e 78 7a 7a 75 25 32 42 65 64 41 79 73 56 42 57 64 31 47 36 72 6c 25 32 42 4b 74 46 75 43 38 25 32 42 53 78 47 72 31 45 51 63 63 49 47 75 52 38 55 37 4d 4b 50 68 6f 54 34 6c 36 4e 25 32 42 34 65 66 44 64 56 54 6b 77 53 68 69 50 45 66 65 73 37 41 67 6a 59 35 52 32 41 75 51 4e 77 65 6f 78 56 79 44 59 39 6f 31 6f 79 44 73 25 32 42 30 48 6b 6b 32 45 57 68 72 51 25 32 46 70 49 53 38 49 47 25 32 46 57 4a 45 6a 4e 58 4b 66 61 4f 6c 63 42 78 5a 68 78 62 6d 72 74 6f 4c 63 78 5a 71 4e 45 6a 35 73 53 47 39 79 69 68 56 67 57 31 56 58 7a 5a 42 46 50 41 25 32 46 4b 6c 36 6f 30 6b 79 4c 73 31 6c 6f 73 4f 4f 6b 5a 72 70 6b 43 30 34 53 6b 44 6b 44 76 78 4d 30 6d 74 63 59 59 62 64 53 31 31 49 66 55 6d 52 72 58 56 31 44 43 51 51 44 55 72 42 56 44 48 36 57 70 79 76 36 41 4e 50 4d 33 33 53 30 44 76 73 69 7a 31 30 38 64 56 68 72 77 4a 67 4c 41 74 36 64 52 6f 71 45 74 68 56 38 4c 75 4a 42 64 50 79 38 55 76 75 7a 4b 63 71 61 30 42 52 36 4f 6f 50 77 68 77 36 34 6a 25 32 46 55 79 4c 76 6f 31 51 61 61 4e 66 36 65 61 44 71 51 49 25 32 42 53 63 62 74 4e 75 33 4c 74 69 66 36 38 6e 42 30 4a 55 48 49 6b 76 66 6c 67 5a 61 58 45 41 61 56 70 5a 79 63 4c 59 63 66 34 78 48 36 66 56 64 47 48 78 6d 38 25 32 42 53 34 32 53 25 32 46 4e 4f 62 4b 47 58 65 70 31 59 77 31 33 54 72 62 4e 31 63 67 5a 4f 39 37 4f 25 32 46 50 53 62 34 42 26 53 69 67 41 6c 67 3d 68 74 74 70 25 33 41 25 32 46 25 32 46 77 77 77 2e 77 33 2e 6f 72 67 25 32 46 32 30 30 31 25 32 46 30 34 25 32 46 78 6d 6c 64 73 69 67 2d 6d 6f 72 65 25 32 33 72 73 61 2d 73 68 61 32 35 36
2023-04-17 23:37:11.812 +01:00 [DBG] Signature algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256.
2023-04-17 23:37:11.819 +01:00 [DBG] Signature: b1 ab 8a c5 b2 12 4f 32 b6 49 4f 0e 17 7b 86 f8 bb 7c 2c c7 47 c2 bb 4e 8c 2b f2 be af c5 32 24 22 c3 ab 03 30 46 6a a0 65 7b 75 c9 07 f4 dc 73 4b 8d 30 c9 62 eb dc f0 85 5d c7 f7 e3 b7 6f 7c 7b 81 e9 8f cd f2 66 ac 6f 7a cc 95 59 ca 56 fd 0c 63 12 de f1 d8 0a 30 19 25 7f 10 d3 07 f2 c4 76 a9 7e 31 19 b3 73 1d 5c 7d 47 8a fa 40 ff aa 36 03 cd 28 cb 8f 1b 2f 01 b8 e5 3b c3 ec c5 12 22 23 4d d8 4e 5e 89 14 25 8f 99 72 2d e8 20 1c 71 dd 07 3e cc 20 88 24 26 a4 41 0b 7f 6e 99 4b 36 19 a4 d4 f8 92 ae 8c de 12 b2 a6 f1 7f 6f 3a 97 9d 5a 62 51 d4 ab 8b 93 e8 bd f6 60 ed 4e 5e 7b 34 10 9a 41 8f d2 4b 7e 86 90 9c 5a a9 48 6a 73 8d a1 0f 54 b0 44 e8 b8 f2 f6 00 89 b7 88 fa 7d 77 37 72 e2 d8 9d f3 89 f6 2a c1 7c 65 27 23 af df b3 95 c4 82 a6 fb da 3d 4e b6 1a a2 72 61
2023-04-17 23:37:11.820 +01:00 [DBG] HTTP Redirect URL: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJfT8IwFMW%2FytL30XVMwIbNIGgkQV1g%2BuCL6boCTbp29nb459O7DVB8kIe%2B3Nxzzu%2BedAysVBWd1G6rl%2BKtFuC8%2BSxGr1EQccIGuR8U7MKPhoT4l6N%2B4efDdVTkwShiPEfes7AgjY5R2AuQNweoxVyDY9o1oyDs%2B0Hkk2EWhrQ%2FpIS8IG%2FWJEjNXKfaOlcBxZhxbmrtoLcxZqNEj5sSG9yihVgW1VXzZBFPA%2FKl6o0kyLs1losOOkZrpkC04SkDkDvxM0mtcYYbdS11IfUmRrXV1DCQQDUrBVDH6Wpyv6ANPM33S0Dvsiz108dVhrwJgLAt6dRoqEthV8LuJBdPy8UvuzKcqa0BR6OoPwhw64j%2FUyLvo1QaaNf6eaDqQI%2BScbtNu3Ltif68nB0JUHIkvflgZaXEAaVpZycLYcf4xH6fVdGHxm8%2BS42S%2FNObKGXep1Yw13TrbN1cgZO97O%2FPSb4B&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=sauKxbISTzK2SU8OF3uG%2BLt8LMdHwrtOjCvyvq%2FFMiQiw6sDMEZqoGV7dckH9NxzS40wyWLr3PCFXcf347dvfHuB6Y%2FN8masb3rMlVnKVv0MYxLe8dgKMBklfxDTB%2FLEdql%2BMRmzcx1cfUeK%2BkD%2FqjYDzSjLjxsvAbjlO8PsxRIiI03YTl6JFCWPmXIt6CAccd0HPswgiCQmpEELf26ZSzYZpNT4kq6M3hKypvF%2FbzqXnVpiUdSri5PovfZg7U5eezQQmkGP0kt%2BhpCcWqlIanONoQ9UsETouPL2AIm3iPp9dzdy4tid84n2KsF8ZScjr9%2BzlcSCpvvaPU62GqJyYQ%3D%3D
2023-04-17 23:37:11.820 +01:00 [DBG] Redirecting to: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJfT8IwFMW%2FytL30XVMwIbNIGgkQV1g%2BuCL6boCTbp29nb459O7DVB8kIe%2B3Nxzzu%2BedAysVBWd1G6rl%2BKtFuC8%2BSxGr1EQccIGuR8U7MKPhoT4l6N%2B4efDdVTkwShiPEfes7AgjY5R2AuQNweoxVyDY9o1oyDs%2B0Hkk2EWhrQ%2FpIS8IG%2FWJEjNXKfaOlcBxZhxbmrtoLcxZqNEj5sSG9yihVgW1VXzZBFPA%2FKl6o0kyLs1losOOkZrpkC04SkDkDvxM0mtcYYbdS11IfUmRrXV1DCQQDUrBVDH6Wpyv6ANPM33S0Dvsiz108dVhrwJgLAt6dRoqEthV8LuJBdPy8UvuzKcqa0BR6OoPwhw64j%2FUyLvo1QaaNf6eaDqQI%2BScbtNu3Ltif68nB0JUHIkvflgZaXEAaVpZycLYcf4xH6fVdGHxm8%2BS42S%2FNObKGXep1Yw13TrbN1cgZO97O%2FPSb4B&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=sauKxbISTzK2SU8OF3uG%2BLt8LMdHwrtOjCvyvq%2FFMiQiw6sDMEZqoGV7dckH9NxzS40wyWLr3PCFXcf347dvfHuB6Y%2FN8masb3rMlVnKVv0MYxLe8dgKMBklfxDTB%2FLEdql%2BMRmzcx1cfUeK%2BkD%2FqjYDzSjLjxsvAbjlO8PsxRIiI03YTl6JFCWPmXIt6CAccd0HPswgiCQmpEELf26ZSzYZpNT4kq6M3hKypvF%2FbzqXnVpiUdSri5PovfZg7U5eezQQmkGP0kt%2BhpCcWqlIanONoQ9UsETouPL2AIm3iPp9dzdy4tid84n2KsF8ZScjr9%2BzlcSCpvvaPU62GqJyYQ%3D%3D
2023-04-17 23:37:11.821 +01:00 [DBG] The SAML message has been sent over HTTP-Redirect.
2023-04-17 23:37:11.824 +01:00 [DBG] SAML session state (05382eb7-0ed4-4944-a401-35dd09601fac):
SP state:
Pending response state:
Action: ReceiveSamlResponse
Partner name: https://accounts.google.com/o/saml2?idpid=C01zlugi1
In response to: _404c1a6b-0da5-4711-983d-b7f4db084acb

2023-04-17 23:37:11.824 +01:00 [DBG] Initiation of SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1 has completed successfully.
2023-04-17 23:40:24.041 +01:00 [DBG] Initiating SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1.
2023-04-17 23:40:24.043 +01:00 [DBG] The SSO session ID b2b1900d-3b0c-411f-a2a8-102ef93b3a33 has been retrieved from the saml-session cookie.
2023-04-17 23:40:24.044 +01:00 [DBG] SSO session state is being initialized.
2023-04-17 23:40:24.044 +01:00 [DBG] SSO session state for saml-session-b2b1900d-3b0c-411f-a2a8-102ef93b3a33-SamlState is being saved to the distributed cache.
2023-04-17 23:40:24.045 +01:00 [DBG] SAML session state (b2b1900d-3b0c-411f-a2a8-102ef93b3a33):
SP state:

2023-04-17 23:40:24.045 +01:00 [DBG] Constructing an authn request.
2023-04-17 23:40:24.046 +01:00 [DBG] Authn request: <samlp:AuthnRequest ID="_e7ec220a-a625-48a4-8222-6df0bcc34422" Version="2.0" IssueInstant="2023-04-17T22:40:24Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:40:24.047 +01:00 [DBG] SSO session state for saml-session-b2b1900d-3b0c-411f-a2a8-102ef93b3a33-SamlState is being saved to the distributed cache.
2023-04-17 23:40:24.049 +01:00 [DBG] Sending the SAML authn request.
2023-04-17 23:40:24.067 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, Exportable, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(Byte[] rawData, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:40:24.083 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(Byte[] rawData, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:40:24.172 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F has been retrieved from the cache.
2023-04-17 23:40:24.173 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F is being validated.
2023-04-17 23:40:24.173 +01:00 [DBG] The certificate has been validated and expires on 31/12/2049 14:00:00.
2023-04-17 23:40:24.174 +01:00 [DBG] Sending a SAML message over HTTP-Redirect.
2023-04-17 23:40:24.175 +01:00 [DBG] Creating an HTTP-Redirect URL.
2023-04-17 23:40:24.175 +01:00 [DBG] SAML request: <samlp:AuthnRequest ID="_e7ec220a-a625-48a4-8222-6df0bcc34422" Version="2.0" IssueInstant="2023-04-17T22:40:24Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:40:24.176 +01:00 [DBG] Relay State: 
2023-04-17 23:40:24.176 +01:00 [DBG] Encoding SAML message: <samlp:AuthnRequest ID="_e7ec220a-a625-48a4-8222-6df0bcc34422" Version="2.0" IssueInstant="2023-04-17T22:40:24Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:40:24.177 +01:00 [DBG] Encoded SAML message: fZJLTwIxFIX/yqT7oUOpSBoGg6CRxMcE0IUbUzoXaNJpx94Oor/eGR6KC1l0c3PPOd89aR9lYUoxrMLaTuG9AgzRZJySN7gExVgiY9llFzHvSR73GGNxN18mC6U6nDNGohfwqJ1NCWslJJogVjCxGKQN9ShhnTjhcftyzpjgiWD8lUTjOkFbGXaqdQglCkqlUq6yAVsr51YGWsoV1NEGjVGdl1f103k6StpfplrpNolunVewg07JUhqEJjyTiHoDP5PMu+CUM9fa5tquUlJ5K5xEjcLKAlAEJWbDh3tRw4vFfgnF3XyexdnTbE6iISL4hnTkLFYF+Bn4jVbwPL3/ZTdOSbN2GATnnW5CG0f6n5JE28JYFLvWzwOVB3oy6DfbYleuP9Gfl8sjARkcSW+2sigNHFDqdjY6B9+nJ/b7rFI81n6TceaMVp/R0Bj3MfIgQ91t8FV9BR3sZX9/zuAb
2023-04-17 23:40:24.178 +01:00 [DBG] Signing data: 53 41 4d 4c 52 65 71 75 65 73 74 3d 66 5a 4a 4c 54 77 49 78 46 49 58 25 32 46 79 71 54 37 6f 55 4f 70 53 42 6f 47 67 36 43 52 78 4d 63 45 30 49 55 62 55 7a 6f 58 61 4e 4a 70 78 39 34 4f 6f 72 25 32 46 65 47 52 36 4b 43 31 6c 30 63 33 50 50 4f 64 38 39 61 52 39 6c 59 55 6f 78 72 4d 4c 61 54 75 47 39 41 67 7a 52 5a 4a 79 53 4e 37 67 45 78 56 67 69 59 39 6c 6c 46 7a 48 76 53 52 37 33 47 47 4e 78 4e 31 38 6d 43 36 55 36 6e 44 4e 47 6f 68 66 77 71 4a 31 4e 43 57 73 6c 4a 4a 6f 67 56 6a 43 78 47 4b 51 4e 39 53 68 68 6e 54 6a 68 63 66 74 79 7a 70 6a 67 69 57 44 38 6c 55 54 6a 4f 6b 46 62 47 58 61 71 64 51 67 6c 43 6b 71 6c 55 71 36 79 41 56 73 72 35 31 59 47 57 73 6f 56 31 4e 45 47 6a 56 47 64 6c 31 66 31 30 33 6b 36 53 74 70 66 70 6c 72 70 4e 6f 6c 75 6e 56 65 77 67 30 37 4a 55 68 71 45 4a 6a 79 54 69 48 6f 44 50 35 50 4d 75 25 32 42 43 55 4d 39 66 61 35 74 71 75 55 6c 4a 35 4b 35 78 45 6a 63 4c 4b 41 6c 41 45 4a 57 62 44 68 33 74 52 77 34 76 46 66 67 6e 46 33 58 79 65 78 64 6e 54 62 45 36 69 49 53 4c 34 68 6e 54 6b 4c 46 59 46 25 32 42 42 6e 34 6a 56 62 77 50 4c 33 25 32 46 5a 54 64 4f 53 62 4e 32 47 41 54 6e 6e 57 35 43 47 30 66 36 6e 35 4a 45 32 38 4a 59 46 4c 76 57 7a 77 4f 56 42 33 6f 79 36 44 66 62 59 6c 65 75 50 39 47 66 6c 38 73 6a 41 52 6b 63 53 57 25 32 42 32 73 69 67 4e 48 46 44 71 64 6a 59 36 42 39 25 32 42 6e 4a 25 32 46 62 37 72 46 49 38 31 6e 36 54 63 65 61 4d 56 70 25 32 46 52 30 42 6a 33 4d 66 49 67 51 39 31 74 38 46 56 39 42 52 33 73 5a 58 39 25 32 46 7a 75 41 62 26 53 69 67 41 6c 67 3d 68 74 74 70 25 33 41 25 32 46 25 32 46 77 77 77 2e 77 33 2e 6f 72 67 25 32 46 32 30 30 31 25 32 46 30 34 25 32 46 78 6d 6c 64 73 69 67 2d 6d 6f 72 65 25 32 33 72 73 61 2d 73 68 61 32 35 36
2023-04-17 23:40:24.178 +01:00 [DBG] Signature algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256.
2023-04-17 23:40:24.209 +01:00 [DBG] Signature: 5c 8f 1b 15 bd 62 1f e8 8f de 14 b2 2e d6 d5 0a 64 0b 37 20 aa 8b 7d 57 03 6d 3a 42 75 39 19 82 8a d9 8e 61 5a b6 77 73 42 a1 d2 16 6c fa f1 fc eb 21 6b b7 cc cb b6 07 05 80 eb c0 94 36 8b 3d 5f 03 1f 63 b7 c3 dd 9e 2b e1 7f 3f 68 e4 79 f1 97 1f 32 fb de 04 66 03 66 33 6e 68 80 88 f8 30 b2 c5 bf c5 d4 cb 18 21 e2 d9 ef d5 0c 25 15 67 4f 99 cd 07 38 20 b5 e2 a4 ab 62 e3 b2 e3 f0 ac 9f d6 fa 1d 83 63 8f 01 ab fe b4 3e 85 7a 77 d8 f0 9a c3 62 db 4b 41 dc 2e cf fe 0e 4c 13 ff c3 9c 4e f6 75 25 6a 0c 0e 11 f3 8e 74 fc 4f ca 20 2c 58 68 ec 1a 88 89 71 f7 ec 2e 19 3a 44 6e e6 26 60 ad c4 7e f2 0f 41 b4 f1 97 1a 92 e8 96 a1 d0 3b d5 72 89 3e de ab 2e b7 9f 8c e6 29 e3 43 73 22 07 12 6e fa 47 dd 19 a4 34 78 e0 32 8f 9d 36 3f 1d 11 ac 72 6c a8 31 dc a6 02 6c d8 03 9a
2023-04-17 23:40:24.212 +01:00 [DBG] HTTP Redirect URL: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJLTwIxFIX%2FyqT7oUOpSBoGg6CRxMcE0IUbUzoXaNJpx94Oor%2FeGR6KC1l0c3PPOd89aR9lYUoxrMLaTuG9AgzRZJySN7gExVgiY9llFzHvSR73GGNxN18mC6U6nDNGohfwqJ1NCWslJJogVjCxGKQN9ShhnTjhcftyzpjgiWD8lUTjOkFbGXaqdQglCkqlUq6yAVsr51YGWsoV1NEGjVGdl1f103k6StpfplrpNolunVewg07JUhqEJjyTiHoDP5PMu%2BCUM9fa5tquUlJ5K5xEjcLKAlAEJWbDh3tRw4vFfgnF3XyexdnTbE6iISL4hnTkLFYF%2BBn4jVbwPL3%2FZTdOSbN2GATnnW5CG0f6n5JE28JYFLvWzwOVB3oy6DfbYleuP9Gfl8sjARkcSW%2B2sigNHFDqdjY6B9%2BnJ%2Fb7rFI81n6TceaMVp%2FR0Bj3MfIgQ91t8FV9BR3sZX9%2FzuAb&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=XI8bFb1iH%2BiP3hSyLtbVCmQLNyCqi31XA206QnU5GYKK2Y5hWrZ3c0Kh0hZs%2BvH86yFrt8zLtgcFgOvAlDaLPV8DH2O3w92eK%2BF%2FP2jkefGXHzL73gRmA2YzbmiAiPgwssW%2FxdTLGCHi2e%2FVDCUVZ0%2BZzQc4ILXipKti47Lj8Kyf1vodg2OPAav%2BtD6FenfY8JrDYttLQdwuz%2F4OTBP%2Fw5xO9nUlagwOEfOOdPxPyiAsWGjsGoiJcffsLhk6RG7mJmCtxH7yD0G08ZcakuiWodA71XKJPt6rLrefjOYp40NzIgcSbvpH3RmkNHjgMo%2BdNj8dEaxybKgx3KYCbNgDmg%3D%3D
2023-04-17 23:40:24.213 +01:00 [DBG] Redirecting to: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJLTwIxFIX%2FyqT7oUOpSBoGg6CRxMcE0IUbUzoXaNJpx94Oor%2FeGR6KC1l0c3PPOd89aR9lYUoxrMLaTuG9AgzRZJySN7gExVgiY9llFzHvSR73GGNxN18mC6U6nDNGohfwqJ1NCWslJJogVjCxGKQN9ShhnTjhcftyzpjgiWD8lUTjOkFbGXaqdQglCkqlUq6yAVsr51YGWsoV1NEGjVGdl1f103k6StpfplrpNolunVewg07JUhqEJjyTiHoDP5PMu%2BCUM9fa5tquUlJ5K5xEjcLKAlAEJWbDh3tRw4vFfgnF3XyexdnTbE6iISL4hnTkLFYF%2BBn4jVbwPL3%2FZTdOSbN2GATnnW5CG0f6n5JE28JYFLvWzwOVB3oy6DfbYleuP9Gfl8sjARkcSW%2B2sigNHFDqdjY6B9%2BnJ%2Fb7rFI81n6TceaMVp%2FR0Bj3MfIgQ91t8FV9BR3sZX9%2FzuAb&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=XI8bFb1iH%2BiP3hSyLtbVCmQLNyCqi31XA206QnU5GYKK2Y5hWrZ3c0Kh0hZs%2BvH86yFrt8zLtgcFgOvAlDaLPV8DH2O3w92eK%2BF%2FP2jkefGXHzL73gRmA2YzbmiAiPgwssW%2FxdTLGCHi2e%2FVDCUVZ0%2BZzQc4ILXipKti47Lj8Kyf1vodg2OPAav%2BtD6FenfY8JrDYttLQdwuz%2F4OTBP%2Fw5xO9nUlagwOEfOOdPxPyiAsWGjsGoiJcffsLhk6RG7mJmCtxH7yD0G08ZcakuiWodA71XKJPt6rLrefjOYp40NzIgcSbvpH3RmkNHjgMo%2BdNj8dEaxybKgx3KYCbNgDmg%3D%3D
2023-04-17 23:40:24.213 +01:00 [DBG] The SAML message has been sent over HTTP-Redirect.
2023-04-17 23:40:24.215 +01:00 [DBG] SAML session state (b2b1900d-3b0c-411f-a2a8-102ef93b3a33):
SP state:
Pending response state:
Action: ReceiveSamlResponse
Partner name: https://accounts.google.com/o/saml2?idpid=C01zlugi1
In response to: _e7ec220a-a625-48a4-8222-6df0bcc34422

2023-04-17 23:40:24.215 +01:00 [DBG] Initiation of SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1 has completed successfully.
2023-04-17 23:41:37.744 +01:00 [DBG] Initiating SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1.
2023-04-17 23:41:37.745 +01:00 [DBG] The SSO session ID b2b1900d-3b0c-411f-a2a8-102ef93b3a33 has been retrieved from the saml-session cookie.
2023-04-17 23:41:37.764 +01:00 [DBG] SAML session state (b2b1900d-3b0c-411f-a2a8-102ef93b3a33):
SP state:
Pending response state:
Action: ReceiveSamlResponse
Partner name: https://accounts.google.com/o/saml2?idpid=C01zlugi1
In response to: _e7ec220a-a625-48a4-8222-6df0bcc34422

2023-04-17 23:41:37.764 +01:00 [DBG] Constructing an authn request.
2023-04-17 23:41:37.765 +01:00 [DBG] Authn request: <samlp:AuthnRequest ID="_09b79fb6-cc37-4bf4-9579-943af95b5b1e" Version="2.0" IssueInstant="2023-04-17T22:41:37Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:41:37.766 +01:00 [DBG] SSO session state for saml-session-b2b1900d-3b0c-411f-a2a8-102ef93b3a33-SamlState is being saved to the distributed cache.
2023-04-17 23:41:37.767 +01:00 [DBG] Sending the SAML authn request.
2023-04-17 23:41:37.785 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, Exportable, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(Byte[] rawData, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:41:37.800 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(Byte[] rawData, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:41:37.865 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F has been retrieved from the cache.
2023-04-17 23:41:37.866 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F is being validated.
2023-04-17 23:41:37.866 +01:00 [DBG] The certificate has been validated and expires on 31/12/2049 14:00:00.
2023-04-17 23:41:37.867 +01:00 [DBG] Sending a SAML message over HTTP-Redirect.
2023-04-17 23:41:37.867 +01:00 [DBG] Creating an HTTP-Redirect URL.
2023-04-17 23:41:37.868 +01:00 [DBG] SAML request: <samlp:AuthnRequest ID="_09b79fb6-cc37-4bf4-9579-943af95b5b1e" Version="2.0" IssueInstant="2023-04-17T22:41:37Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:41:37.869 +01:00 [DBG] Relay State: 
2023-04-17 23:41:37.870 +01:00 [DBG] Encoding SAML message: <samlp:AuthnRequest ID="_09b79fb6-cc37-4bf4-9579-943af95b5b1e" Version="2.0" IssueInstant="2023-04-17T22:41:37Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:41:37.871 +01:00 [DBG] Encoded SAML message: fZJLb8IwEIT/SuR7cF4QxSJUFFoVibYRpD30UjlmAUuOnXod+vj1TaDPQ3vwZbUz8+3IY+S1ati0dXu9gqcW0HmLeU4eg6xKs2018oWIUz+ptomfDdPMz5KYb7NhNaxCIN49WJRG5yQaBMRbILaw0Oi4dt0oiGI/SPwwLaOIJSGL0wfizbsEqbk7qvbONcgo5UKYVjsc7IzZKRgIU1NDe7SIyk1z1j25yWdB+KbanQyJd2msgCN0TrZcIfThBUeUB/iaFNY4I4w6l3oj9S4nrdXMcJTINK8BmRNsPb1esg6eVaclZFdlWfjF7bok3hQRbE86MxrbGuwa7EEKuFstv9mVEVztDTqWJPEooL0j/UtJvJdaaWTH1v8Haj7oyWTcb7NjufaH/n85/yQgk0/SixdeNwo+ULp2DnIDdkx/2J+yGnbT+S3mhVFSvHpTpczzzAJ3XbfOtt0VdHKS/f45k3c=
2023-04-17 23:41:37.872 +01:00 [DBG] Signing data: 53 41 4d 4c 52 65 71 75 65 73 74 3d 66 5a 4a 4c 62 38 49 77 45 49 54 25 32 46 53 75 52 37 63 46 34 51 78 53 4a 55 46 46 6f 56 69 62 59 52 70 44 33 30 55 6a 6c 6d 41 55 75 4f 6e 58 6f 64 25 32 42 76 6a 31 54 61 44 50 51 33 76 77 5a 62 55 7a 38 25 32 42 33 49 59 25 32 42 53 31 61 74 69 30 64 58 75 39 67 71 63 57 30 48 6d 4c 65 55 34 65 67 36 78 4b 73 32 30 31 38 6f 57 49 55 7a 25 32 42 70 74 6f 6d 66 44 64 50 4d 7a 35 4b 59 62 37 4e 68 4e 61 78 43 49 4e 34 39 57 4a 52 47 35 79 51 61 42 4d 52 62 49 4c 61 77 30 4f 69 34 64 74 30 6f 69 47 49 25 32 46 53 50 77 77 4c 61 4f 49 4a 53 47 4c 30 77 66 69 7a 62 73 45 71 62 6b 37 71 76 62 4f 4e 63 67 6f 35 55 4b 59 56 6a 73 63 37 49 7a 5a 4b 52 67 49 55 31 4e 44 65 37 53 49 79 6b 31 7a 31 6a 32 35 79 57 64 42 25 32 42 4b 62 61 6e 51 79 4a 64 32 6d 73 67 43 4e 30 54 72 5a 63 49 66 54 68 42 55 65 55 42 25 32 46 69 61 46 4e 59 34 49 34 77 36 6c 33 6f 6a 39 53 34 6e 72 64 58 4d 63 4a 54 49 4e 4b 38 42 6d 52 4e 73 50 62 31 65 73 67 36 65 56 61 63 6c 5a 46 64 6c 57 66 6a 46 37 62 6f 6b 33 68 51 52 62 45 38 36 4d 78 72 62 47 75 77 61 37 45 45 4b 75 46 73 74 76 39 6d 56 45 56 7a 74 44 54 71 57 4a 50 45 6f 6f 4c 30 6a 25 32 46 55 74 4a 76 4a 64 61 61 57 54 48 31 76 38 48 61 6a 37 6f 79 57 54 63 62 37 4e 6a 75 66 61 48 25 32 46 6e 38 35 25 32 46 79 51 67 6b 30 25 32 46 53 69 78 64 65 4e 77 6f 25 32 42 55 4c 70 32 44 6e 49 44 64 6b 78 25 32 46 32 4a 25 32 42 79 47 6e 62 54 25 32 42 53 33 6d 68 56 46 53 76 48 70 54 70 63 7a 7a 7a 41 4a 33 58 62 66 4f 74 74 30 56 64 48 4b 53 25 32 46 66 34 35 6b 33 63 25 33 44 26 53 69 67 41 6c 67 3d 68 74 74 70 25 33 41 25 32 46 25 32 46 77 77 77 2e 77 33 2e 6f 72 67 25 32 46 32 30 30 31 25 32 46 30 34 25 32 46 78 6d 6c 64 73 69 67 2d 6d 6f 72 65 25 32 33 72 73 61 2d 73 68 61 32 35 36
2023-04-17 23:41:37.872 +01:00 [DBG] Signature algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256.
2023-04-17 23:41:37.895 +01:00 [DBG] Signature: b9 e9 68 2b 6a b7 ca f1 92 b2 a5 21 2d 4f 18 97 41 6e dc 6a db 6b 1e ee ec 7d 25 9d 9d f2 c3 6d de f9 fd fd 8c 28 d5 c7 a0 3a f6 28 69 9e 9e e7 ec 30 1a cb 66 ef 24 b6 96 ca d8 72 2b b7 c8 30 b0 ef 8c f5 f9 8e 42 e0 33 62 2d 79 cb f2 b3 9a f1 51 07 de 19 ca 9d 4e 69 de f1 89 ee 32 62 89 f8 27 29 ad 11 4c bc 06 91 4a fe 39 6e 68 fe 9c 85 12 42 4f 09 b5 d4 eb 3c 76 5b 0d d4 bf 66 31 66 e8 fc 6c 8c ce 44 38 41 4a 6f f4 3b 0a e2 10 2f b2 b0 38 df 3b 05 75 62 91 ba b0 33 ca 20 ec 29 76 7a da 7b 53 c6 27 e5 a7 4b 2a b9 f5 0c da f4 27 dd 6c f9 f4 fa 35 d1 d9 be 17 bc 38 5b fb 3d ee 03 d9 69 2d 58 4e fc 68 9d 21 f0 b2 84 e8 f3 49 e5 fb e5 21 d6 86 09 42 82 fd 6c a7 d3 e1 c0 86 67 b7 24 a5 40 e1 e2 51 42 b4 29 37 80 41 67 09 a8 ca 81 2f 84 d2 5f a9 d1 7f d8 38 03 ee
2023-04-17 23:41:37.896 +01:00 [DBG] HTTP Redirect URL: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJLb8IwEIT%2FSuR7cF4QxSJUFFoVibYRpD30UjlmAUuOnXod%2Bvj1TaDPQ3vwZbUz8%2B3IY%2BS1ati0dXu9gqcW0HmLeU4eg6xKs2018oWIUz%2BptomfDdPMz5KYb7NhNaxCIN49WJRG5yQaBMRbILaw0Oi4dt0oiGI%2FSPwwLaOIJSGL0wfizbsEqbk7qvbONcgo5UKYVjsc7IzZKRgIU1NDe7SIyk1z1j25yWdB%2BKbanQyJd2msgCN0TrZcIfThBUeUB%2FiaFNY4I4w6l3oj9S4nrdXMcJTINK8BmRNsPb1esg6eVaclZFdlWfjF7bok3hQRbE86MxrbGuwa7EEKuFstv9mVEVztDTqWJPEooL0j%2FUtJvJdaaWTH1v8Haj7oyWTcb7NjufaH%2Fn85%2FyQgk0%2FSixdeNwo%2BULp2DnIDdkx%2F2J%2ByGnbT%2BS3mhVFSvHpTpczzzAJ3XbfOtt0VdHKS%2Ff45k3c%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=ueloK2q3yvGSsqUhLU8Yl0Fu3Grbax7u7H0lnZ3yw23e%2Bf39jCjVx6A69ihpnp7n7DAay2bvJLaWythyK7fIMLDvjPX5jkLgM2Itecvys5rxUQfeGcqdTmne8YnuMmKJ%2BCcprRFMvAaRSv45bmj%2BnIUSQk8JtdTrPHZbDdS%2FZjFm6PxsjM5EOEFKb%2FQ7CuIQL7KwON87BXVikbqwM8og7Cl2etp7U8Yn5adLKrn1DNr0J91s%2BfT6NdHZvhe8OFv7Pe4D2WktWE78aJ0h8LKE6PNJ5fvlIdaGCUKC%2FWyn0%2BHAhme3JKVA4eJRQrQpN4BBZwmoyoEvhNJfqdF%2F2DgD7g%3D%3D
2023-04-17 23:41:37.897 +01:00 [DBG] Redirecting to: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJLb8IwEIT%2FSuR7cF4QxSJUFFoVibYRpD30UjlmAUuOnXod%2Bvj1TaDPQ3vwZbUz8%2B3IY%2BS1ati0dXu9gqcW0HmLeU4eg6xKs2018oWIUz%2BptomfDdPMz5KYb7NhNaxCIN49WJRG5yQaBMRbILaw0Oi4dt0oiGI%2FSPwwLaOIJSGL0wfizbsEqbk7qvbONcgo5UKYVjsc7IzZKRgIU1NDe7SIyk1z1j25yWdB%2BKbanQyJd2msgCN0TrZcIfThBUeUB%2FiaFNY4I4w6l3oj9S4nrdXMcJTINK8BmRNsPb1esg6eVaclZFdlWfjF7bok3hQRbE86MxrbGuwa7EEKuFstv9mVEVztDTqWJPEooL0j%2FUtJvJdaaWTH1v8Haj7oyWTcb7NjufaH%2Fn85%2FyQgk0%2FSixdeNwo%2BULp2DnIDdkx%2F2J%2ByGnbT%2BS3mhVFSvHpTpczzzAJ3XbfOtt0VdHKS%2Ff45k3c%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=ueloK2q3yvGSsqUhLU8Yl0Fu3Grbax7u7H0lnZ3yw23e%2Bf39jCjVx6A69ihpnp7n7DAay2bvJLaWythyK7fIMLDvjPX5jkLgM2Itecvys5rxUQfeGcqdTmne8YnuMmKJ%2BCcprRFMvAaRSv45bmj%2BnIUSQk8JtdTrPHZbDdS%2FZjFm6PxsjM5EOEFKb%2FQ7CuIQL7KwON87BXVikbqwM8og7Cl2etp7U8Yn5adLKrn1DNr0J91s%2BfT6NdHZvhe8OFv7Pe4D2WktWE78aJ0h8LKE6PNJ5fvlIdaGCUKC%2FWyn0%2BHAhme3JKVA4eJRQrQpN4BBZwmoyoEvhNJfqdF%2F2DgD7g%3D%3D
2023-04-17 23:41:37.897 +01:00 [DBG] The SAML message has been sent over HTTP-Redirect.
2023-04-17 23:41:37.899 +01:00 [DBG] SAML session state (b2b1900d-3b0c-411f-a2a8-102ef93b3a33):
SP state:
Pending response state:
Action: ReceiveSamlResponse
Partner name: https://accounts.google.com/o/saml2?idpid=C01zlugi1
In response to: _e7ec220a-a625-48a4-8222-6df0bcc34422
Pending response state:
Action: ReceiveSamlResponse
Partner name: https://accounts.google.com/o/saml2?idpid=C01zlugi1
In response to: _09b79fb6-cc37-4bf4-9579-943af95b5b1e

2023-04-17 23:41:37.900 +01:00 [DBG] Initiation of SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1 has completed successfully.
2023-04-17 23:42:00.817 +01:00 [DBG] Initiating SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1.
2023-04-17 23:42:00.826 +01:00 [DBG] The SSO session ID 4713984d-856d-459b-a59a-eb4afd954c74 has been saved to the saml-session cookie.
2023-04-17 23:42:00.829 +01:00 [DBG] HTTP cookie: saml-session=4713984d-856d-459b-a59a-eb4afd954c74; Path=/; SameSite=None; Secure; HttpOnly
2023-04-17 23:42:00.831 +01:00 [DBG] SSO session state is being initialized.
2023-04-17 23:42:00.833 +01:00 [DBG] SSO session state for saml-session-4713984d-856d-459b-a59a-eb4afd954c74-SamlState is being saved to the distributed cache.
2023-04-17 23:42:00.835 +01:00 [DBG] SAML session state (4713984d-856d-459b-a59a-eb4afd954c74):
SP state:

2023-04-17 23:42:00.835 +01:00 [DBG] Constructing an authn request.
2023-04-17 23:42:00.836 +01:00 [DBG] Authn request: <samlp:AuthnRequest ID="_0847e962-d319-48d5-8704-f5389ef171ab" Version="2.0" IssueInstant="2023-04-17T22:42:00Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:42:00.837 +01:00 [DBG] SSO session state for saml-session-4713984d-856d-459b-a59a-eb4afd954c74-SamlState is being saved to the distributed cache.
2023-04-17 23:42:00.838 +01:00 [DBG] Sending the SAML authn request.
2023-04-17 23:42:00.875 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, Exportable, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(Byte[] rawData, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:42:00.888 +01:00 [DBG] The certificate failed to load using the flags MachineKeySet, EphemeralKeySet.
System.PlatformNotSupportedException: This platform does not support loading with EphemeralKeySet. Remove the flag to allow keys to be temporarily created on disk.
   at System.Security.Cryptography.X509Certificates.AppleCertificatePal.FromBlob(ReadOnlySpan`1 rawData, SafePasswordHandle password, X509KeyStorageFlags keyStorageFlags)
   at System.Security.Cryptography.X509Certificates.X509Certificate..ctor(Byte[] rawData, String password, X509KeyStorageFlags keyStorageFlags)
   at ComponentSpace.Saml2.Certificates.CertificateLoader.LoadCertificate(Byte[] certificateBytes, String certificateFile, String certificatePassword)
2023-04-17 23:42:00.954 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F has been retrieved from the cache.
2023-04-17 23:42:00.954 +01:00 [DBG] The X.509 certificate with subject name CN=www.sp.com, serial number 0867A17DC9EFEABE4CCBF7E7ADB7C37A and thumbprint 427A3D5B39DF593B1D44B769D3697AEDF00FD83F is being validated.
2023-04-17 23:42:00.956 +01:00 [DBG] The certificate has been validated and expires on 31/12/2049 14:00:00.
2023-04-17 23:42:00.956 +01:00 [DBG] Sending a SAML message over HTTP-Redirect.
2023-04-17 23:42:00.957 +01:00 [DBG] Creating an HTTP-Redirect URL.
2023-04-17 23:42:00.958 +01:00 [DBG] SAML request: <samlp:AuthnRequest ID="_0847e962-d319-48d5-8704-f5389ef171ab" Version="2.0" IssueInstant="2023-04-17T22:42:00Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:42:00.958 +01:00 [DBG] Relay State: 
2023-04-17 23:42:00.959 +01:00 [DBG] Encoding SAML message: <samlp:AuthnRequest ID="_0847e962-d319-48d5-8704-f5389ef171ab" Version="2.0" IssueInstant="2023-04-17T22:42:00Z" Destination="https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1" ForceAuthn="false" IsPassive="false" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="https://localhost:44360/SAML/AssertionConsumerService" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"><saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">https://ExampleServiceProvider</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" /></samlp:AuthnRequest>
2023-04-17 23:42:00.960 +01:00 [DBG] Encoded SAML message: fZJJb8IwEIX/SuR7cBLCZhEqCq2K1CUC2kMvlesMYMmxU49Dl19fJ0CXQ3vwZTTvvW+ePEZeqopNa7fTS3ipAV2wmGfkKRqmAxj1k7DoxqMwHRa9cDiI0nDT6w5HsIkHMX8mwQNYlEZnJOlEJFgg1rDQ6Lh2fhQl3dAr4sE6SViasCh6JMHcJ0jNXavaOVcho5QLYWrtsLM1ZqugI0xJDW3QEiqL6sw/WWSzKP5Q9VbGJLg0VkALnZENVwhNeM4R5R6+Jrk1zgijzqUupN5mpLaaGY4SmeYlIHOCraY318zDs+fDErKr9ToP87vVmgRTRLAN6cxorEuwK7B7KeB+ef3NrozgamfQsTTt9iPaONK/lCR4K5VG1rb+P1B1pCeTcbPN2nLtD/3/cn4iIJMT6cUbLysFRxTfzl4WYMf0h/0hq2K33m8xz42S4j2YKmVeZxa48906W/sr6OQg+/1zJp8=
2023-04-17 23:42:00.960 +01:00 [DBG] Signing data: 53 41 4d 4c 52 65 71 75 65 73 74 3d 66 5a 4a 4a 62 38 49 77 45 49 58 25 32 46 53 75 52 37 63 42 4c 43 5a 68 45 71 43 71 32 4b 31 43 55 43 32 6b 4d 76 6c 65 73 4d 59 4d 6d 78 55 34 39 44 6c 31 39 66 4a 30 43 58 51 33 76 77 5a 54 54 76 76 57 25 32 42 65 50 45 5a 65 71 6f 70 4e 61 37 66 54 53 33 69 70 41 56 32 77 6d 47 66 6b 4b 52 71 6d 41 78 6a 31 6b 37 44 6f 78 71 4d 77 48 52 61 39 63 44 69 49 30 6e 44 54 36 77 35 48 73 49 6b 48 4d 58 38 6d 77 51 4e 59 6c 45 5a 6e 4a 4f 6c 45 4a 46 67 67 31 72 44 51 36 4c 68 32 66 68 51 6c 33 64 41 72 34 73 45 36 53 56 69 61 73 43 68 36 4a 4d 48 63 4a 30 6a 4e 58 61 76 61 4f 56 63 68 6f 35 51 4c 59 57 72 74 73 4c 4d 31 5a 71 75 67 49 30 78 4a 44 57 33 51 45 69 71 4c 36 73 77 25 32 46 57 57 53 7a 4b 50 35 51 39 56 62 47 4a 4c 67 30 56 6b 41 4c 6e 5a 45 4e 56 77 68 4e 65 4d 34 52 35 52 36 25 32 42 4a 72 6b 31 7a 67 69 6a 7a 71 55 75 70 4e 35 6d 70 4c 61 61 47 59 34 53 6d 65 59 6c 49 48 4f 43 72 61 59 33 31 38 7a 44 73 25 32 42 66 44 45 72 4b 72 39 54 6f 50 38 37 76 56 6d 67 52 54 52 4c 41 4e 36 63 78 6f 72 45 75 77 4b 37 42 37 4b 65 42 25 32 42 65 66 33 4e 72 6f 7a 67 61 6d 66 51 73 54 54 74 39 69 50 61 4f 4e 4b 25 32 46 6c 43 52 34 4b 35 56 47 31 72 62 25 32 42 50 31 42 31 70 43 65 54 63 62 50 4e 32 6e 4c 74 44 25 32 46 33 25 32 46 63 6e 34 69 49 4a 4d 54 36 63 55 62 4c 79 73 46 52 78 54 66 7a 6c 34 57 59 4d 66 30 68 25 32 46 30 68 71 32 4b 33 33 6d 38 78 7a 34 32 53 34 6a 32 59 4b 6d 56 65 5a 78 61 34 38 39 30 36 57 25 32 46 73 72 36 4f 51 67 25 32 42 25 32 46 31 7a 4a 70 38 25 33 44 26 53 69 67 41 6c 67 3d 68 74 74 70 25 33 41 25 32 46 25 32 46 77 77 77 2e 77 33 2e 6f 72 67 25 32 46 32 30 30 31 25 32 46 30 34 25 32 46 78 6d 6c 64 73 69 67 2d 6d 6f 72 65 25 32 33 72 73 61 2d 73 68 61 32 35 36
2023-04-17 23:42:00.961 +01:00 [DBG] Signature algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256.
2023-04-17 23:42:00.971 +01:00 [DBG] Signature: 22 02 a2 b0 46 c5 e8 06 80 b7 bb f1 62 53 86 e8 c9 88 26 fe fe d7 01 6e b2 3f e5 05 9b ed f7 12 e6 a3 a4 b5 f8 94 74 72 d1 26 a4 2c fb 8e 47 40 53 2f ce 8a 68 ad 2a d7 0a e6 26 32 25 23 90 22 b5 81 a3 89 6d f7 43 b5 6e 26 63 6b 35 35 c4 a8 95 f2 c8 bf fe 63 68 63 a3 6e 64 4f 11 e8 5f a8 45 41 88 b7 73 10 f6 48 a8 35 9b a8 e0 d0 77 52 98 7d f5 fd cc f7 29 f3 54 3b 3d da 26 e2 3a 67 e5 ca bd 74 d4 f9 43 b4 62 9c 5a 16 10 9f 6f 63 9b 7f 40 d9 33 ca 77 e5 05 ed 14 c4 0c cc 39 0c fb 76 9b c1 01 d9 35 11 de 3e 98 37 e0 5e 1b b4 42 fe bb 96 1f 94 99 18 ad 97 f1 04 94 3f 2a d7 1a a3 d0 b1 da be 7f f2 ed 17 4c e1 2f 70 e0 00 f5 72 43 d3 da d1 2a 1a 7b d5 6e 39 3c 05 37 97 af 49 69 ea 16 e0 9b 33 78 8f bf 73 e8 62 9c 33 94 73 fe ac 12 94 d1 a0 0c 47 5a 2c 3e 9b c9 10
2023-04-17 23:42:00.972 +01:00 [DBG] HTTP Redirect URL: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJJb8IwEIX%2FSuR7cBLCZhEqCq2K1CUC2kMvlesMYMmxU49Dl19fJ0CXQ3vwZTTvvW%2BePEZeqopNa7fTS3ipAV2wmGfkKRqmAxj1k7DoxqMwHRa9cDiI0nDT6w5HsIkHMX8mwQNYlEZnJOlEJFgg1rDQ6Lh2fhQl3dAr4sE6SViasCh6JMHcJ0jNXavaOVcho5QLYWrtsLM1ZqugI0xJDW3QEiqL6sw%2FWWSzKP5Q9VbGJLg0VkALnZENVwhNeM4R5R6%2BJrk1zgijzqUupN5mpLaaGY4SmeYlIHOCraY318zDs%2BfDErKr9ToP87vVmgRTRLAN6cxorEuwK7B7KeB%2Bef3NrozgamfQsTTt9iPaONK%2FlCR4K5VG1rb%2BP1B1pCeTcbPN2nLtD%2F3%2Fcn4iIJMT6cUbLysFRxTfzl4WYMf0h%2F0hq2K33m8xz42S4j2YKmVeZxa48906W%2Fsr6OQg%2B%2F1zJp8%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=IgKisEbF6AaAt7vxYlOG6MmIJv7%2B1wFusj%2FlBZvt9xLmo6S1%2BJR0ctEmpCz7jkdAUy%2FOimitKtcK5iYyJSOQIrWBo4lt90O1biZjazU1xKiV8si%2F%2FmNoY6NuZE8R6F%2BoRUGIt3MQ9kioNZuo4NB3Uph99f3M9ynzVDs92ibiOmflyr101PlDtGKcWhYQn29jm39A2TPKd%2BUF7RTEDMw5DPt2m8EB2TUR3j6YN%2BBeG7RC%2FruWH5SZGK2X8QSUPyrXGqPQsdq%2Bf%2FLtF0zhL3DgAPVyQ9Pa0Soae9VuOTwFN5evSWnqFuCbM3iPv3PoYpwzlHP%2BrBKU0aAMR1osPpvJEA%3D%3D
2023-04-17 23:42:00.972 +01:00 [DBG] Redirecting to: https://accounts.google.com/o/saml2/idp?idpid=C01zlugi1&SAMLRequest=fZJJb8IwEIX%2FSuR7cBLCZhEqCq2K1CUC2kMvlesMYMmxU49Dl19fJ0CXQ3vwZTTvvW%2BePEZeqopNa7fTS3ipAV2wmGfkKRqmAxj1k7DoxqMwHRa9cDiI0nDT6w5HsIkHMX8mwQNYlEZnJOlEJFgg1rDQ6Lh2fhQl3dAr4sE6SViasCh6JMHcJ0jNXavaOVcho5QLYWrtsLM1ZqugI0xJDW3QEiqL6sw%2FWWSzKP5Q9VbGJLg0VkALnZENVwhNeM4R5R6%2BJrk1zgijzqUupN5mpLaaGY4SmeYlIHOCraY318zDs%2BfDErKr9ToP87vVmgRTRLAN6cxorEuwK7B7KeB%2Bef3NrozgamfQsTTt9iPaONK%2FlCR4K5VG1rb%2BP1B1pCeTcbPN2nLtD%2F3%2Fcn4iIJMT6cUbLysFRxTfzl4WYMf0h%2F0hq2K33m8xz42S4j2YKmVeZxa48906W%2Fsr6OQg%2B%2F1zJp8%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=IgKisEbF6AaAt7vxYlOG6MmIJv7%2B1wFusj%2FlBZvt9xLmo6S1%2BJR0ctEmpCz7jkdAUy%2FOimitKtcK5iYyJSOQIrWBo4lt90O1biZjazU1xKiV8si%2F%2FmNoY6NuZE8R6F%2BoRUGIt3MQ9kioNZuo4NB3Uph99f3M9ynzVDs92ibiOmflyr101PlDtGKcWhYQn29jm39A2TPKd%2BUF7RTEDMw5DPt2m8EB2TUR3j6YN%2BBeG7RC%2FruWH5SZGK2X8QSUPyrXGqPQsdq%2Bf%2FLtF0zhL3DgAPVyQ9Pa0Soae9VuOTwFN5evSWnqFuCbM3iPv3PoYpwzlHP%2BrBKU0aAMR1osPpvJEA%3D%3D
2023-04-17 23:42:00.973 +01:00 [DBG] The SAML message has been sent over HTTP-Redirect.
2023-04-17 23:42:00.985 +01:00 [DBG] SAML session state (4713984d-856d-459b-a59a-eb4afd954c74):
SP state:
Pending response state:
Action: ReceiveSamlResponse
Partner name: https://accounts.google.com/o/saml2?idpid=C01zlugi1
In response to: _0847e962-d319-48d5-8704-f5389ef171ab

2023-04-17 23:42:00.985 +01:00 [DBG] Initiation of SSO to the partner identity provider https://accounts.google.com/o/saml2?idpid=C01zlugi1 has completed successfully.
